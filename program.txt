y := 0;
(spawn
    (lock x in (while (!x == 0) do skip))
);
(lock x in y := 1)